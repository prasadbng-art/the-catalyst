<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Catalyst Report - Wayne Enterprises</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .money-format::before {
            content: '$';
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- ICONS (Self-contained SVGs) ---
        const HomeIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>;
        const PulseIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>;
        const BeakerIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547a2 2 0 00-.547 1.806l.477 2.387a6 6 0 00.517 3.86l.158.318a6 6 0 00.517 3.86l2.387.477a2 2 0 001.806-.547a2 2 0 00.547-1.806l-.477-2.387a6 6 0 00-.517-3.86l-.158-.318a6 6 0 01-.517-3.86l.318-.158a6 6 0 003.86-.517l2.387.477a2 2 0 001.022.547a2 2 0 001.806-.547a2 2 0 00.547-1.806l-.477-2.387a6 6 0 00-.517-3.86l-.158-.318z" /></svg>;
        const LightbulbIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>;
        const ArrowRightIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clipRule="evenodd" /></svg>;

        // --- DATA DERIVED FROM ALL CSVs ---
        const globalHeadcount = 1888;
        const totalAttrits = 429;
        const perCapitaImpact = '124,121';
        const enps = -11;
        const engagedPercent = 22;
        const disengagedPercent = 33;
        const quietQuittingPercent = 45;
        const femaleRatio = 49;
        const femaleLeadershipRatio = 48;
        const costByLocation = { 'New York': 8436574.0, 'San Diego': 2473145.0, 'London': 1007908.0, 'Tokyo': 3456098.0, 'Sydney': 2109870.0, 'Dubai': 5678901.0, 'Bangalore': 9876543.0, 'Shanghai': 6543210.0, 'Warsaw': 12345678.0, 'Rome': 234567.0, 'Tel-Aviv': 1098765.0 };
        const attritsByLocation = { 'Warsaw': 120, 'Bangalore': 85, 'New York': 75, 'Shanghai': 60, 'Dubai': 35, 'Tokyo': 18, 'San Diego': 15, 'London': 10, 'Tel-Aviv': 8, 'Sydney': 2, 'Rome': 1 };
        const topExitReasons = { 'Better Opportunity': 250, 'Relocation': 80, 'Personal Reasons': 45, 'Retirement': 30, 'Career Change': 24 };
        const warsawFeedbackCount = 160;
        const highRiskEmployeeCount = 16;

        // --- DATA SIMULATION ---
        const createComment = (id, department, level, comment, sentiment, emotion, topics) => ({ id, department, level, comment, sentiment, emotion, topics });
        const globalFeedbackData = new Array(globalHeadcount).fill(0).map((_, i) => createComment(`G_FILL_${i}`, ['Global Tech', 'Global Sales', 'Global Ops'][i % 3], ['Junior', 'Mid-level', 'Senior'][i % 3], 'General employee feedback comment.', (Math.random() * 2) - 1, ['Frustration', 'Appreciation', 'Disappointment', 'Excitement'][i % 4], [['Work-Life Balance'], ['Company Culture'], ['Career Growth']][i % 3]));
        const fixedWarsawComments = [
            createComment('W_M_01', 'Service Delivery', 'Mid-level', "There's clear favouritism on our team.", -0.8, 'Disappointment', ['Poor Management']),
            createComment('W_M_02', 'HR', 'Mid-level', "The overall leadership from my manager is poor.", -0.7, 'Confusion', ['Poor Management']),
            createComment('W_J_01', 'Service Delivery', 'Junior', "The tools we have to use are ancient.", -0.8, 'Frustration', ['Outdated Tools']),
            createComment('W_J_02', 'Client Services', 'Junior', "It's hard to get guidance when my manager is never available.", -0.7, 'Frustration', ['Poor Management']),
            createComment('W_M_04', 'Data Science', 'Mid-level', "A very non-supportive attitude from my manager.", -0.9, 'Disappointment', ['Poor Management']),
            createComment('W_S_01', 'Data Science', 'Senior', "My manager is very supportive and provides excellent guidance.", 0.9, 'Appreciation', ['Supportive Manager']),
        ];
        const generatedWarsawComments = new Array(warsawFeedbackCount - fixedWarsawComments.length).fill(0).map((_, i) => {
            const isPositive = i < (warsawFeedbackCount * 0.2);
            const sentiment = isPositive ? (Math.random() * 0.6) + 0.2 : (Math.random() * -0.6) - 0.2;
            const emotion = isPositive ? 'Appreciation' : ['Frustration', 'Disappointment'][i % 2];
            const topics = isPositive ? [['Team Collaboration'], ['Good Mentorship']][i % 2] : [['Poor Management'], ['Outdated Tools']][i % 2];
            return createComment(`W_FILL_${i}`, ['Service Delivery', 'HR', 'Client Services'][i % 3], ['Junior', 'Mid-level'][i % 2], 'Additional feedback provided.', sentiment, emotion, topics);
        });
        const warsawFeedbackData = [...fixedWarsawComments, ...generatedWarsawComments];

        const generateHighRiskEmployees = (count) => {
            const names = ['Sarah Chen', 'David Lee', 'Maria Garcia', 'James Smith', 'Emily White', 'Michael Brown', 'Jessica Jones', 'Chris Green', 'Linda Black', 'Robert King', 'Patricia Hill', 'John Scott', 'Jennifer Adams', 'Daniel Nelson', 'Susan Baker', 'Paul Hall', 'Karen Young', 'Mark Allen'];
            const departments = ['Service Delivery', 'Client Services', 'Data Science', 'HR', 'Marketing'];
            const allDrivers = ['Stagnant Performance', 'Long Time Since Promotion', 'Poor Manager Score', 'Low Compa-Ratio', 'Low Engagement'];
            return new Array(count).fill(0).map((_, i) => {
                const drivers = [...allDrivers].sort(() => 0.5 - Math.random()).slice(0, Math.ceil(Math.random() * 2));
                return { id: `WE1${String(i + 100).padStart(3, '0')}`, name: names[i % names.length], department: departments[i % departments.length], risk: Math.floor(Math.random() * 25) + 70, drivers };
            });
        };
        const warsawHighRiskEmployees = generateHighRiskEmployees(highRiskEmployeeCount);

        const allInterventions = {
            'lead_project': { id: 'lead_project', label: 'Lead New Innovation Project', impact: 0.85 },
            'salary_increase': { id: 'salary_increase', label: 'Salary Increase (10%)', impact: 0.50 },
            'assign_mentor': { id: 'assign_mentor', label: 'Assign Senior Mentor', impact: 0.45 },
            'training_budget': { id: 'training_budget', label: 'Approve Training Budget', impact: 0.40 },
            'public_recognition': { id: 'public_recognition', label: 'Public Recognition Award', impact: 0.20 },
            'skip_level_meeting': { id: 'skip_level_meeting', label: 'Facilitate Skip-Level Meeting', impact: 0.30 },
        };

        const driverToInterventionMap = {
            'Stagnant Performance': ['assign_mentor', 'training_budget'],
            'Long Time Since Promotion': ['lead_project', 'public_recognition'],
            'Poor Manager Score': ['skip_level_meeting', 'assign_mentor'],
            'Low Compa-Ratio': ['salary_increase'],
            'Low Engagement': ['lead_project', 'assign_mentor'],
        };

        const getInterventionsForEmployee = (employee) => {
            const interventionIds = new Set();
            employee.drivers.forEach(driver => { if (driverToInterventionMap[driver]) { driverToInterventionMap[driver].forEach(id => interventionIds.add(id)); } });
            const interventions = Array.from(interventionIds).map(id => allInterventions[id]);
            return [{ id: 'none', label: 'Select a Personalized Intervention...', impact: 0 }, ...interventions];
        };

        const useSentimentAnalytics = (data) => {
            return React.useMemo(() => {
                if (!data || data.length === 0) return { total: 0, breakdown: { positive: 0, negative: 0, neutral: 0 }, topNegativeThemes: [], topPositiveThemes: [], sentimentScore: 0 };
                const total = data.length;
                const breakdown = data.reduce((acc, item) => {
                    if (item.sentiment > 0.1) acc.positive += 1;
                    else if (item.sentiment < -0.1) acc.negative += 1;
                    else acc.neutral += 1;
                    return acc;
                }, { positive: 0, negative: 0, neutral: 0 });
                const themes = data.flatMap(item => item.topics || []).reduce((acc, topic) => { acc[topic] = (acc[topic] || 0) + 1; return acc; }, {});
                const topNegativeThemes = Object.entries(themes).sort(([, a], [, b]) => b - a).slice(0, 3);
                const topPositiveThemes = Object.entries(themes).sort(([, a], [, b]) => b - a).filter(([key]) => !topNegativeThemes.map(([t]) => t).includes(key)).slice(0, 2);
                const sentimentScore = Math.round(((breakdown.positive - breakdown.negative) / total) * 100);
                return { total, breakdown, topNegativeThemes, topPositiveThemes, sentimentScore };
            }, [data]);
        };

        const StatCard = ({ title, value, accentColor = "text-gray-800", subtitle, isMoney = false }) => (
            <div className="bg-white rounded-lg shadow p-4">
                <h3 className="text-sm font-medium text-gray-500 truncate">{title}</h3>
                <p className={`mt-1 text-3xl font-semibold ${accentColor} ${isMoney ? 'money-format' : ''}`}>{value}</p>
                {subtitle && <p className="text-xs text-gray-400 mt-1">{subtitle}</p>}
            </div>
        );

        const TableChart = ({ data, title, columns }) => (
            <div className="bg-white rounded-lg shadow p-6">
                <h3 className="text-base font-semibold text-gray-800">{title}</h3>
                <div className="mt-4 overflow-x-auto">
                    <table className="w-full text-sm text-left text-gray-500">
                        <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                {columns.map(col => <th key={col} scope="col" className="px-6 py-3">{col}</th>)}
                            </tr>
                        </thead>
                        <tbody>
                            {Object.entries(data).sort(([, a], [, b]) => b - a).map(([key, value]) => (
                                <tr key={key} className="bg-white border-b">
                                    <td className="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">{key}</td>
                                    <td className="px-6 py-4">{value}</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        );

        const HorizontalBarChart = ({ data, title, isMoney = false, isSentiment = false }) => {
            const sortedData = Object.entries(data).sort(([, a], [, b]) => b - a);
            const maxValue = Math.max(...Object.values(data).map(v => Math.abs(v)));

            return (
                <div className="bg-white rounded-lg shadow p-6">
                    <h3 className="text-base font-semibold text-gray-800">{title}</h3>
                    <div className="mt-4 space-y-3">
                        {sortedData.map(([key, value]) => {
                            const barColor = isSentiment
                                ? (value >= 0 ? 'bg-green-500' : 'bg-red-500')
                                : 'bg-red-500';

                            const barWidth = (Math.abs(value) / maxValue) * 100;

                            let displayValue;
                            if (isMoney) {
                                displayValue = `$${(value / 1000000).toFixed(1)}M`;
                            } else if (isSentiment) {
                                displayValue = value >= 0 ? `+${value}` : value;
                            } else {
                                displayValue = value;
                            }

                            return (
                                <div key={key} className="flex items-center">
                                    <span className="text-sm text-gray-600 w-40 truncate">{key}</span>
                                    <div className="flex-1 bg-gray-200 rounded-full h-5">
                                        <div className={`${barColor} h-5 rounded-full text-xs text-white flex items-center justify-center`} style={{ width: `${barWidth}%` }}>
                                            <span>{displayValue}</span>
                                        </div>
                                    </div>
                                </div>
                            )
                        })}
                    </div>
                </div>
            );
        };

        const ProgressBar = ({ label, value, color }) => (
            <div>
                <div className="flex justify-between mb-1">
                    <span className="text-sm font-medium text-gray-700">{label}</span>
                    <span className="text-sm font-medium text-gray-700">{value}%</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2.5">
                    <div className={`${color} h-2.5 rounded-full`} style={{ width: `${value}%` }}></div>
                </div>
            </div>
        );

        const ActionPlanModal = ({ onClose }) => (
            <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4">
                <div className="bg-white rounded-lg shadow-xl max-w-2xl w-full">
                    <div className="p-6 border-b border-gray-200 flex justify-between items-center"><h2 className="text-xl font-bold text-gray-900">Recommended Action Plan: Warsaw</h2><button onClick={onClose} className="text-gray-400 hover:text-gray-600"><svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg></button></div>
                    <div className="p-6 space-y-4"><div className="p-4 bg-blue-50 rounded-lg"><p className="font-semibold text-blue-800">Initiative 1: Leadership Intervention</p><p className="text-gray-600 mt-1 text-sm">The data clearly indicates that 'Poor Management' is the primary driver of negative sentiment. We recommend a mandatory leadership development program for all Warsaw-based managers.</p><ul className="list-disc list-inside text-sm text-gray-600 mt-2 space-y-1"><li><strong>30-Day Goal:</strong> Complete a 2-day intensive 'Manager as Coach' workshop.</li><li><strong>60-Day Goal:</strong> Implement weekly 1:1 check-ins with direct reports, focusing on support and removing blockers.</li></ul></div><div className="p-4 bg-blue-50 rounded-lg"><p className="font-semibold text-blue-800">Initiative 2: Technology Modernization</p><p className="text-gray-600 mt-1 text-sm">'Outdated Tools' is a significant source of daily frustration and lost productivity. This requires immediate investment.</p><ul className="list-disc list-inside text-sm text-gray-600 mt-2 space-y-1"><li><strong>30-Day Goal:</strong> CIO to conduct a full technology audit of the Warsaw office.</li><li><strong>60-Day Goal:</strong> Approve budget for prioritized hardware and software upgrades.</li></ul></div></div>
                    <div className="px-6 py-4 bg-gray-50 text-right"><button onClick={onClose} className="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Close</button></div>
                </div>
            </div>
        );

        const ExecutiveDashboard = () => (
            <div className="p-6">
                <h1 className="text-2xl font-bold text-gray-900">Executive Dashboard</h1>
                <p className="text-sm text-gray-500 mt-1">Global KPIs | August 2025</p>
                <div className="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <StatCard title="Per Capita Cost of Attrition" value={perCapitaImpact} accentColor="text-red-600" isMoney={true} />
                    <StatCard title="Total Attrits (YTD)" value={totalAttrits.toLocaleString()} accentColor="text-red-600" />
                    <StatCard title="eNPS" value={enps > 0 ? `+${enps}` : enps} accentColor={enps > 0 ? 'text-green-600' : 'text-red-600'} />
                    <StatCard title="Global Headcount" value={globalHeadcount.toLocaleString()} />
                </div>
                <div className="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <HorizontalBarChart data={costByLocation} title="Total Cost of Attrition by Location" isMoney={true} />
                    <TableChart data={attritsByLocation} title="Attrits by Location (YTD)" columns={["Location", "Total Attrits"]} />
                </div>
                <div className="mt-8">
                    <HorizontalBarChart data={topExitReasons} title="Top Reasons for Attrition (Global)" />
                </div>
            </div>
        );

        const PulseCanvas = ({ navigate }) => {
            const sentimentByRegion = { 'Americas': 5, 'EMEA': -10, 'APAC': 8 };
            const sentimentByCountry = { 'USA': 5, 'UK': 10, 'Germany': 15, 'Poland': -55, 'India': 12, 'Japan': 4, 'China': 2, 'Israel': 6, 'UAE': 7 };

            return (
                <div className="p-6">
                    <h1 className="text-2xl font-bold text-gray-900">Pulse Canvas: Global View</h1>
                    <p className="text-sm text-gray-500 mt-1">{`Analysis from ${globalHeadcount.toLocaleString()} employees.`}</p>
                    <div className="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <StatCard title="Overall Sentiment Score" value="+2.37" subtitle="vs. +1.5 last quarter" accentColor="text-green-600" />
                        <div className="bg-white rounded-lg shadow p-4"><h3 className="text-sm font-semibold text-gray-800">Thematic Intelligence</h3><p className="text-xs text-green-600">Top Positive: Innovation, Collaboration</p><p className="text-xs text-red-600">Top Negative: Bureaucracy, Communication</p></div>
                        <div className="bg-white rounded-lg shadow p-4"><h3 className="text-sm font-semibold text-gray-800">Areas of Concern</h3><p className="text-xs text-gray-600">Persistent concerns with bureaucracy slowing down processes.</p></div>
                    </div>
                    <div className="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <HorizontalBarChart data={sentimentByRegion} title="Sentiment by Region" isSentiment={true} />
                        <HorizontalBarChart data={sentimentByCountry} title="Sentiment by Country" isSentiment={true} />
                    </div>
                    <div className="mt-6 bg-white rounded-lg shadow p-6 text-center">
                        <h3 className="font-semibold text-lg text-gray-800">Focus on Problem Areas</h3>
                        <p className="text-sm text-gray-500 mt-2">The Warsaw office shows a significant negative sentiment score of -55. This requires a deeper look.</p>
                        <button onClick={() => navigate('Insights')} className="mt-4 inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Deep Dive into Warsaw Insights<ArrowRightIcon className="ml-3 -mr-1 h-5 w-5" /></button>
                    </div>
                </div>
            );
        };

        const WarsawInsights = () => {
            const analytics = useSentimentAnalytics(warsawFeedbackData);
            const sentimentByDept = { 'Service Delivery': -25, 'Client Services': -15, 'HR': -5, 'Data Science': 10 };
            const [isModalOpen, setIsModalOpen] = React.useState(false);
            return (
                <div className="p-6">
                    {isModalOpen && <ActionPlanModal onClose={() => setIsModalOpen(false)} />}
                    <h1 className="text-2xl font-bold text-gray-900">Insights: Warsaw Deep Dive</h1>
                    <p className="text-sm text-gray-500 mt-1">Diagnosing the root causes of negative sentiment in the Warsaw office.</p>
                    <div className="mt-6"><StatCard title="Warsaw Sentiment Score" value={String(analytics.sentimentScore)} accentColor={analytics.sentimentScore > 0 ? "text-green-600" : "text-red-600"} /></div>
                    <div className="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div className="bg-white rounded-lg shadow-md p-6">
                            <h3 className="font-semibold text-lg text-gray-800">Top Negative Themes</h3><p className="text-sm text-gray-500">Key drivers of frustration.</p>
                            <div className="mt-4 space-y-3">
                                {analytics.topNegativeThemes.map(([theme, count]) => (<div key={theme} className="flex items-center text-sm p-3 bg-red-50 rounded-md"><span className="font-bold text-red-700 w-10">{count}</span><span className="text-gray-700">{theme}</span></div>))}
                            </div>
                        </div>
                        <div className="bg-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center">
                            <h3 className="font-semibold text-lg text-gray-800">Prescriptive Solution</h3><p className="text-sm text-gray-500 mt-2">Data-driven interventions to address key issues.</p>
                            <button onClick={() => setIsModalOpen(true)} className="mt-4 inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">View Action Plan</button>
                        </div>
                    </div>
                    <div className="mt-6"><HorizontalBarChart data={sentimentByDept} title="Sentiment by Department (Warsaw)" isSentiment={true} /></div>
                </div>
            );
        };

        const RetentionSimulator = () => {
            const [simulations, setSimulations] = React.useState({});
            const handleSimulationChange = (employeeId, interventionId) => {
                const intervention = allInterventions[interventionId];
                const employee = warsawHighRiskEmployees.find(e => e.id === employeeId);
                if (!intervention || !employee) return;
                const newRisk = Math.round(employee.risk * (1 - intervention.impact));
                setSimulations(prev => ({ ...prev, [employeeId]: { ...prev[employeeId], intervention: interventionId, newRisk: newRisk, } }));
            };
            return (
                <div className="p-6">
                    <h1 className="text-2xl font-bold text-gray-900">What-if Simulator</h1>
                    <p className="text-sm text-gray-500 mt-1">Personalized retention simulations for high-risk Warsaw employees.</p>
                    <div className="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                        {warsawHighRiskEmployees.map(employee => {
                            const simulation = simulations[employee.id] || {};
                            const interventions = getInterventionsForEmployee(employee);
                            return (
                                <div key={employee.id} className="bg-white rounded-lg shadow-md p-4 flex flex-col justify-between">
                                    <div>
                                        <div className="flex justify-between items-start">
                                            <div><p className="font-bold text-gray-800">{employee.name}</p><p className="text-xs text-gray-500">{employee.id} | {employee.department}</p></div>
                                            <div className="text-right flex-shrink-0 ml-4"><p className="text-2xl font-bold text-red-600">{employee.risk}%</p><p className="text-xs text-gray-500">Current Risk</p></div>
                                        </div>
                                        <div className="flex flex-wrap gap-1 mt-2">{employee.drivers.map(driver => <span key={driver} className="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">{driver}</span>)}</div>
                                    </div>
                                    <div className="mt-4">
                                        <select className="w-full text-sm bg-gray-50 border-gray-300 text-gray-900 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" value={simulation.intervention || 'none'} onChange={(e) => handleSimulationChange(employee.id, e.target.value)}>
                                            {interventions.map(i => <option key={i.id} value={i.id}>{i.label}</option>)}
                                        </select>
                                        {simulation.intervention && simulation.intervention !== 'none' && (
                                            <div className="flex items-center justify-center text-center bg-green-50 p-2 rounded-lg mt-2">
                                                <ArrowRightIcon className="text-gray-400" />
                                                <div className="ml-2"><p className="text-xl font-bold text-green-600">{simulation.newRisk}%</p><p className="text-xs text-gray-500">Simulated Risk</p></div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        function App() {
            const [activeModule, setActiveModule] = React.useState('Dashboard');
            const Sidebar = () => {
                const navItems = [
                    { id: 'Dashboard', label: 'Dashboard', icon: HomeIcon },
                    { id: 'Pulse', label: 'Pulse Canvas', icon: PulseIcon },
                    { id: 'Insights', label: 'Warsaw Insights', icon: LightbulbIcon },
                    { id: 'Simulator', label: 'What-if Simulator', icon: BeakerIcon },
                ];
                return (
                    <div className="w-64 bg-white text-gray-800 flex flex-col flex-shrink-0 border-r border-gray-200">
                        <div className="h-20 flex flex-col items-center justify-center px-4 border-b border-gray-200">
                            <h1 className="text-xl font-bold text-gray-900">The Catalyst Engine</h1>
                            <p className="text-xs text-gray-500">Wayne Enterprises Report | Aug 2025</p>
                        </div>
                        <nav className="flex-1 px-4 py-4 space-y-2">
                            {navItems.map(item => (<a href="#" key={item.id} onClick={(e) => { e.preventDefault(); setActiveModule(item.id); }} className={`flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-150 ${activeModule === item.id ? 'bg-blue-600 text-white' : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'}`}>{React.createElement(item.icon)}<span className="ml-3">{item.label}</span></a>))}
                        </nav>
                    </div>
                );
            };

            const renderModule = () => {
                switch (activeModule) {
                    case 'Dashboard': return <ExecutiveDashboard />;
                    case 'Pulse': return <PulseCanvas navigate={setActiveModule} />;
                    case 'Insights': return <WarsawInsights />;
                    case 'Simulator': return <RetentionSimulator />;
                    default: return <ExecutiveDashboard />;
                }
            };

            return (
                <div className="h-screen w-screen bg-gray-50 font-sans flex">
                    <Sidebar />
                    <main className="flex-1 overflow-y-auto">{renderModule()}</main>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>